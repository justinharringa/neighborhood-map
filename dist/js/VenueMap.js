function VenueMapModel(){var a=this;this.venues=ko.observableArray(),this.nameFilter=ko.observable(""),this.map=ko.observable(),this.filteredVenues=ko.pureComputed(function(){return a.venues().filter(function(b){var c=b.name.toString().toLowerCase(),d=a.nameFilter().toString().toLowerCase();return a.map()&&!b.marker&&addMarkerToVenue(b),c.indexOf(d)>-1?(a.setMarkerMap(b,a.map()),!0):(a.setMarkerMap(b,null),!1)})},a),this.setMarkerMap=function(a,b){a.marker&&a.marker.setMap(b)},this.animateMarkerForVenue=function(a){animateMarkerForVenue(a)}}function addMarkerToVenue(a){var b=a.location;a.marker=new google.maps.Marker({position:{lat:b.lat,lng:b.lon},map:null,title:a.name}),a.marker.addListener("click",function(){animateMarkerForVenue(a)})}function animateMarkerForVenue(a){toggleBounce(a),showInfoWindow(a)}function toggleBounce(a){var b=a.marker;null!==currentlyBouncingMarker&&currentlyBouncingMarker.setAnimation(null),b.setAnimation(google.maps.Animation.BOUNCE),currentlyBouncingMarker=b}function getVenueInfoWindowString(a){var b=a.address;return null===b&&(b="lat: "+a.location.lat+", lng: "+a.location.lon),'<div class="venueName">'+a.name+'</div><div class="venueAddress">'+b+"</div>"}function showInfoWindow(a){var b=a.marker;null!==currentInfoWindow&&currentInfoWindow.close();var c=getVenueInfoWindowString(a),d=new google.maps.InfoWindow({content:c});d.open(b.getMap(),b),currentInfoWindow=d}var currentlyBouncingMarker=null,currentInfoWindow=null;